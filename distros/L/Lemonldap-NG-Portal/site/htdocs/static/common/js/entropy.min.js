!function(){"use strict";function c(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){var n;if(e)return"string"==typeof e?t(e,r):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var r=new Map([["Err","bg-danger"],["0","bg-danger"],["1","bg-warning"],["2","bg-info"],["3","bg-primary"],["4","bg-success"]]),n=new Map([["Err","0"],["0","20"],["1","40"],["2","60"],["3","80"],["4","100"]]),p=function(e){return $("#entropybar div").removeClass(),$("#entropybar div").addClass("progress-bar"),$("#entropybar div").width(n.get(e)+"%"),$("#entropybar div").addClass(r.get(e)),$("#entropybar div").html(n.get(e)+"%")},s=function(e){return $("#entropybar-msg").html(e),0===e.length?$("#entropybar-msg").addClass("entropyHidden"):$("#entropybar-msg").removeClass("entropyHidden")};$(document).on("checkpassword",function(e,r){var n,t,o,a;if(r.password,r.evType,a=r.setResult,0<$("#ppolicy-checkentropy-feedback").length&&(o=$("#newpassword").val(),n=$("span[trspan='checkentropyLabel']").attr("data-checkentropy_required"),t=$("span[trspan='checkentropyLabel']").attr("data-checkentropy_required_level"),0===o.length&&(p("Err"),s(""),a("ppolicy-checkentropy-feedback","unknown")),0<o.length))return $.ajax({dataType:"json",url:"".concat(scriptname,"checkentropy"),method:"POST",data:{password:btoa(String.fromCharCode.apply(String,c((new TextEncoder).encode(o))))},context:document.body,success:function(e){var r=e.level,e=e.message;if(void 0!==r)return 0<=parseInt(r)&&parseInt(r)<=4?(p(r),s(e),"1"===n&&0<t.length&&(parseInt(r)>=parseInt(t)?a("ppolicy-checkentropy-feedback","good"):a("ppolicy-checkentropy-feedback","bad")),"1"!==n?a("ppolicy-checkentropy-feedback","good"):void 0):-1===parseInt(r)?(p(r),s(e),a("ppolicy-checkentropy-feedback","bad")):(p(r),s(e),a("ppolicy-checkentropy-feedback","unknown"))},error:function(e,r,n){var t;n&&console.debug("checkentropy: frontend error: ",n),(t=e?JSON.parse(e.responseText):t)&&t.error&&console.debug("checkentropy: returned error: ",t)}})})}();