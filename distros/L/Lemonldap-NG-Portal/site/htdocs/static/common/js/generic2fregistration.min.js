!function(){"use strict";var o=function(e,r){return $("#msg").attr("trspan",e),$("#msg").html(window.translate(e)),$("#color").removeClass("message-positive message-warning message-danger alert-success alert-warning alert-danger"),$("#color").addClass("message-".concat(r)),"positive"===r&&(r="success"),$("#color").addClass("alert-".concat(r)),$("#msg").attr("role","danger"===r?"alert":"status")},c=function(e,r,n){if(console.error("Error",n),(n=JSON.parse(e.responseText))&&n.error)return n=n.error.replace(/.* /,""),console.error("Returned error",n),o(n,"warning")},e=function(){var e=$("#generic").val(),r=window.datas.prefix;return e?$.ajax({type:"POST",url:"".concat(scriptname,"2fregisters/").concat(r,"/sendcode"),dataType:"json",data:{generic:e},headers:{"X-CSRF-Check":"1"},error:c,success:function(e){return e.error?e.error.match(/PE79/)?o(e.error,"warning"):o(e.error,"danger"):($("#token").val(e.token),o("genericCheckCode","success"))}}):(o("PE79","warning"),$("#generic").focus())},r=function(){var e=$("#generic").val(),r=$("#genericname").val(),n=$("#code").val(),a=window.datas.prefix,t=$("#token").val();return e?$.ajax({type:"POST",url:"".concat(scriptname,"2fregisters/").concat(a,"/verify"),dataType:"json",data:{generic:e,genericname:r,genericcode:n,token:t},headers:{"X-CSRF-Check":"1"},error:c,success:function(e){return e.error?e.error.match(/mailNotSent/)?o(e.error,"warning"):o(e.error,"danger"):(e=jQuery.Event("mfaAdded"),$(document).trigger(e,[{type:a}]),e.isDefaultPrevented()?void 0:window.location.href=window.portal+"2fregisters?continue=1")}}):(o("PE79","warning"),$("#generic").focus())};$(document).ready(function(){return $("#verify").on("click",e),$("#register").on("click",r)})}();